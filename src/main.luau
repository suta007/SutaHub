--!strict
-- src/main.luau

local env = (typeof(getgenv) == "function" and getgenv()) or shared or _G

print("üöÄ SutaHub: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å (Main) ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞‡∏û‡∏µ‡πà‡πÄ‡∏≠‡∏ü!")

local config = env.SutaHubConfig

if not config or type(config.BaseUrl) ~= "string" then
	error(
		"‚ùå SutaHub [Error]: ‡πÑ‡∏°‡πà‡∏û‡∏ö BaseUrl ‡∏Ñ‡πà‡∏∞ ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ú‡πà‡∏≤‡∏ô loader.luau ‡∏ô‡∏∞‡∏Ñ‡∏∞"
	)
end

-- 1. ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡∏î‡∏π‡∏• GitHub ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
local githubUrl: string = `{config.BaseUrl}src/utils/github.luau`
local GitHub = loadstring(game:HttpGet(githubUrl) :: any)()

print("üé® SutaHub: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á UI...")

-- 2. ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å (Window) ‡∏à‡∏≤‡∏Å Fluent Renewed
-- (‡πÉ‡∏ô window.luau ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á CollapsibleSection Addon ‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞)
local GUI = GitHub.require("src/gui/window.luau")
local Window = GUI.Window
local Fluent = GUI.Fluent -- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å GUI.Library ‡πÄ‡∏õ‡πá‡∏ô GUI.Fluent ‡∏ï‡∏≤‡∏° Type ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô window.luau

-- 3. ‡πÇ‡∏´‡∏•‡∏î Tabs ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á UI
print("üìÅ SutaHub: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Auto Buy Tab...")
local AutoBuyTab = GitHub.require("src/gui/tabs/autobuy_tab.luau")
AutoBuyTab.init(Window, Fluent)

-- =======================================================
-- [ ‡πÇ‡∏ã‡∏ô‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡∏£‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Ñ‡πà‡∏≠‡∏¢‡∏°‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ô‡∏∞‡∏Ñ‡∏∞ ]
-- =======================================================
-- local FarmTab = GitHub.require("src/gui/tabs/farm_tab.luau")
-- FarmTab.init(Window, Fluent)

-- local SettingTab = GitHub.require("src/gui/tabs/setting_tab.luau")
-- SettingTab.init(Window, Fluent)

-- print("‚öôÔ∏è SutaHub: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå...")
-- local AutoFarm = GitHub.require("src/features/auto_farm.luau")
-- local Motion = GitHub.require("src/features/motion.luau")
-- =======================================================

-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Tab ‡∏ó‡∏µ‡πà 1 ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
Window:SelectTab(1)

print("‚úÖ SutaHub: ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞!")

-- ‡∏™‡∏±‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á Notification ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
if Fluent and Fluent.Notify then
	Fluent:Notify({
		Title = "SutaHub",
		Content = `‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô {config.Version} ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞‡∏û‡∏µ‡πà‡πÄ‡∏≠‡∏ü!`,
		Duration = 5,
	})
end
